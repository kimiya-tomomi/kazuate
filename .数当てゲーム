import random

def number_guessing_game():
    """æ•°å½“ã¦ã‚²ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³é–¢æ•°"""
    print("=== æ•°å½“ã¦ã‚²ãƒ¼ãƒ  ===")
    print("1ã‹ã‚‰100ã®æ•°å­—ã‚’å½“ã¦ã¦ãã ã•ã„ï¼")
    print("ãƒ’ãƒ³ãƒˆ: ã‚‚ã£ã¨å¤§ãã„/ã‚‚ã£ã¨å°ã•ã„ã§æ•™ãˆã¾ã™")
    print("-" * 40)
    
    # ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ãŒãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å­—ã‚’é¸ã¶
    correct_number = random.randint(1, 100)
    attempts = 0
    
    # ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
    while True:
        try:
            # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›
            guess_input = input("æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (1-100): ")


            guess = int(guess_input)
            attempts += 1
            
            # ç¯„å›²ãƒã‚§ãƒƒã‚¯
            if guess < 1 or guess > 100:
                print("ã‚¨ãƒ©ãƒ¼: 1ã‹ã‚‰100ã®é–“ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
                attempts -= 1  # ç„¡åŠ¹ãªå…¥åŠ›ã¯è©¦è¡Œå›æ•°ã«ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„
                continue
            
            # åˆ¤å®šã¨ãƒ’ãƒ³ãƒˆ
            if guess == correct_number:
                print(f"\nğŸ‰ æ­£è§£ã§ã™ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼")
                print(f"ç­”ãˆã¯ {correct_number} ã§ã—ãŸ")
                print(f"è©¦è¡Œå›æ•°: {attempts}å›")
                
                # è©¦è¡Œå›æ•°ã«ã‚ˆã‚‹è©•ä¾¡
                if attempts <= 3:
                    print("ç´ æ™´ã‚‰ã—ã„ï¼ã¨ã¦ã‚‚å°‘ãªã„å›æ•°ã§å½“ã¦ã¾ã—ãŸï¼")
                elif attempts <= 7:
                    print("è‰¯ã„çµæœã§ã™ï¼")
                else:
                    print("é ‘å¼µã‚Šã¾ã—ãŸï¼æ¬¡ã¯ã‚‚ã£ã¨æ—©ãå½“ã¦ã‚‰ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“")
                break
            elif guess > correct_number:
                print("ğŸ’¡ ã‚‚ã£ã¨å°ã•ã„æ•°å­—ã§ã™")
            else:
                print("ğŸ’¡ ã‚‚ã£ã¨å¤§ãã„æ•°å­—ã§ã™")
                
        except ValueError:
            print("ã‚¨ãƒ©ãƒ¼: æ•°å­—ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„")
            attempts -= 1  # ç„¡åŠ¹ãªå…¥åŠ›ã¯è©¦è¡Œå›æ•°ã«ã‚«ã‚¦ãƒ³ãƒˆã—ãªã„
        except KeyboardInterrupt:
            print("\n\nã‚²ãƒ¼ãƒ ã‚’ä¸­æ–­ã—ã¾ã—ãŸã€‚")
            return False

def main():
    """ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ— - ç¹°ã‚Šè¿”ã—ã‚²ãƒ¼ãƒ ã‚’å¯èƒ½ã«ã™ã‚‹"""
    while True:
        number_guessing_game()
        
        # ç¶šè¡Œã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèª
        while True:
            try:
                choice = input("\nã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤ã—ã¾ã™ã‹ï¼Ÿ (y/n): ").lower().strip()
                if choice in ['y', 'yes', 'ã¯ã„', 'Y']:
                    print("\n" + "="*50)  # åŒºåˆ‡ã‚Šç·š
                    break
                elif choice in ['n', 'no', 'ã„ã„ãˆ', 'N']:
                    print("ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¾ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼")
                    return
                else:
                    print("y ã¾ãŸã¯ n ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚")
            except KeyboardInterrupt:
                print("\n\nã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¾ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼")
                return

if __name__ == "__main__":
    main()